<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="Generator" content="EditPlus®">
	<meta name="Author" content="">
	<meta name="Keywords" content="">
	<meta name="Description" content="">
	<title>reg bit tool</title>
</head>

<body>
	<table align="center" border="1">
		<tr>
			<td>
				<table align="center">
					<tr align="center">
						<td>寄存器计算</td>
					</tr>
				</table>
			</td>
		</tr>

		<tr>
			<td>
				<table align="center">
					<tr align="center">
						<td>31</td>
						<td>30</td>
						<td>29</td>
						<td>28&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td>27</td>
						<td>26</td>
						<td>25</td>
						<td>24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td>23</td>
						<td>22</td>
						<td>21</td>
						<td>20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td>19</td>
						<td>18</td>
						<td>17</td>
						<td>16</td>
					</tr>
					<tr align="center">
						<td><input type="button" value="0" onclick="set_button_value( '00')" id="00"></td>
						<td><input type="button" value="0" onclick="set_button_value( '01')" id="01"></td>
						<td><input type="button" value="0" onclick="set_button_value( '02')" id="02"></td>
						<td><input type="button" value="0" onclick="set_button_value( '03')" id="03">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td><input type="button" value="0" onclick="set_button_value( '04')" id="04"></td>
						<td><input type="button" value="0" onclick="set_button_value( '05')" id="05"></td>
						<td><input type="button" value="0" onclick="set_button_value( '06')" id="06"></td>
						<td><input type="button" value="0" onclick="set_button_value( '07')" id="07">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td><input type="button" value="0" onclick="set_button_value( '08')" id="08"></td>
						<td><input type="button" value="0" onclick="set_button_value( '09')" id="09"></td>
						<td><input type="button" value="0" onclick="set_button_value( '10')" id="10"></td>
						<td><input type="button" value="0" onclick="set_button_value( '11')" id="11">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td><input type="button" value="0" onclick="set_button_value( '12')" id="12"></td>
						<td><input type="button" value="0" onclick="set_button_value( '13')" id="13"></td>
						<td><input type="button" value="0" onclick="set_button_value( '14')" id="14"></td>
						<td><input type="button" value="0" onclick="set_button_value( '15')" id="15"></td>
					</tr>
					<tr align="center">						
						<td></td>
						<td></td>
						<td></td>
						<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td></td>
						<td></td>
						<td></td>
						<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td></td>
						<td></td>
						<td></td>
						<td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
					<tr align="center">
						<td>15</td>
						<td>14</td>
						<td>13</td>
						<td>12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td>11</td>
						<td>10</td>
						<td>9</td>
						<td>8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td>7</td>
						<td>6</td>
						<td>5</td>
						<td>4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td>3</td>
						<td>2</td>
						<td>1</td>
						<td>0</td>
					</tr>
					<tr align="center">
						<td><input type="button" value="0" onclick="set_button_value( '16')" id="16"></td>
						<td><input type="button" value="0" onclick="set_button_value( '17')" id="17"></td>
						<td><input type="button" value="0" onclick="set_button_value( '18')" id="18"></td>
						<td><input type="button" value="0" onclick="set_button_value( '19')" id="19">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td><input type="button" value="0" onclick="set_button_value( '20')" id="20"></td>
						<td><input type="button" value="0" onclick="set_button_value( '21')" id="21"></td>
						<td><input type="button" value="0" onclick="set_button_value( '22')" id="22"></td>
						<td><input type="button" value="0" onclick="set_button_value( '23')" id="23">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td><input type="button" value="0" onclick="set_button_value( '24')" id="24"></td>
						<td><input type="button" value="0" onclick="set_button_value( '25')" id="25"></td>
						<td><input type="button" value="0" onclick="set_button_value( '26')" id="26"></td>
						<td><input type="button" value="0" onclick="set_button_value( '27')" id="27">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
						<td><input type="button" value="0" onclick="set_button_value( '28')" id="28"></td>
						<td><input type="button" value="0" onclick="set_button_value( '29')" id="29"></td>
						<td><input type="button" value="0" onclick="set_button_value( '30')" id="30"></td>
						<td><input type="button" value="0" onclick="set_button_value( '31')" id="31"></td>
					</tr>
				</table>
			</td>
		</tr>
		<tr>
			<td>
				<table>
					<tr>
						<td>十六进制：<input type="text" name="" id="hex" value="0X0" style="width:280px;"
								onchange="set_text_value('hex')"></td>
					</tr>
					<tr>
						<td>十&nbsp; 进&nbsp; 制：<input type="text" name="" id="dec" value="0" style="width:280px;"
								onchange="set_text_value('dec')"></td>
					</tr>
					<tr>
						<td>二 &nbsp;进&nbsp; 制：<input type="text" name="" id="bin" value="0" style="width:280px;"
								onchange="set_text_value('bin')"></td>
					</tr>
					<tr>
						<td><input type="button" value="清空数字" onclick="clean_value()" id="clean"></td>
					</tr>
				</table>
			</td>
		</tr>
	</table>
</body>

</html>
<script>
	function clean_value() {
		document.getElementById("hex").value = "0X0";
		document.getElementById("bin").value = "0";
		document.getElementById("dec").value = "0";

		for (i = 0; i < 32; i++) {
			if (i < 10) {
				id = "0" + i;
				document.getElementById(id).value = "0";
				document.getElementById(id).style.color = "Black"
			}
			else {
				document.getElementById(i).value = "0";
				document.getElementById(i).style.color = "Black"
			}
		}
	}

	function str_to_bin() {
		var bin_arr = [];
		var flag = 0;
		var bin_str;
		var hex_str;
		for (i = 0; i < 32; i++) {
			if (i < 10) {
				id = "0" + i;
				//console.log( id );
				bin_arr[i] = document.getElementById(id).value;
			}
			else {
				bin_arr[i] = document.getElementById(i).value;
			}
		}

		for (i = 0; i < 32; i++) {
			if (bin_arr[i] == 1) {
				flag = i;
				break;
			}
		}

		document.getElementById("bin").value = "";
		for (i = flag; i < 32; i++) {
			document.getElementById("bin").value = document.getElementById("bin").value + bin_arr[i];
		}

		bin_str = document.getElementById("bin").value;

		document.getElementById("dec").value = parseInt(bin_str, 2).toString(10);
		hex_str = "0X" + parseInt(bin_str, 2).toString(16);
		document.getElementById("hex").value = hex_str.toUpperCase();
		
		dec_str = parseInt(bin_str, 2).toString(10);
		document.getElementById("bin").value = parseInt(dec_str, 10).toString(2);
	}

	function set_button_value(id) {
		if (document.getElementById(id).value == 0) {
			document.getElementById(id).value = 1;
			document.getElementById(id).style.color = "Red"
		}
		else if (document.getElementById(id).value == 1) {
			document.getElementById(id).value = 0;
			document.getElementById(id).style.color = "Black"
		}
		str_to_bin();
	}

	function set_text_value(id) {
		var hex_str;
		var bin_str;
		var dec_str;
		if ( id === "bin") {
			bin_str = document.getElementById("bin").value;
			
			document.getElementById("dec").value = parseInt(bin_str, 2).toString(10);
			
			hex_str ="0X" + parseInt(bin_str, 2).toString(16);
			document.getElementById("hex").value = hex_str.toUpperCase();
		}
		else if (id === "hex") {
			hex_str = document.getElementById("hex").value;
			
			document.getElementById("dec").value = parseInt(hex_str, 16).toString(10);
			
			document.getElementById("bin").value = parseInt(hex_str, 16).toString(2);
			
			document.getElementById("hex").value = hex_str.toUpperCase();
			console.log(hex_str);
			console.log(hex_str.toUpperCase());
		}
		else if (id === "dec") {
			dec_str = document.getElementById("dec").value;
			document.getElementById("bin").value = parseInt(dec_str, 10).toString(2);
			
			hex_str="0X" + parseInt(dec_str, 10).toString(16);
			document.getElementById("hex").value = hex_str.toUpperCase();
		}

		bin_str = document.getElementById("bin").value;
		//console.log( bin_str.length );
		//console.log( bin_str.charAt(0) );
		//console.log( bin_str.charAt(1) );
		//console.log( bin_str.charAt(2) );
		//console.log( bin_str.charAt(3) );

		j = bin_str.length-1;
		for (i = 31; i >= 0; i--) {
			if ( j >=0 ) {
				//console.log(bin_str.charAt(j));
				if (i < 10) {
					eid = "0" + i;
					document.getElementById(eid).value = bin_str.charAt(j);
					if (bin_str.charAt(j) == 1) {
						document.getElementById(eid).style.color = "Red"
					}
					else {
						document.getElementById(eid).style.color = "Black"
					}
				}
				else {
					document.getElementById(i).value = bin_str.charAt(j);
					if (bin_str.charAt(j) == 1) {
						document.getElementById(i).style.color = "Red"
					}
					else {
						document.getElementById(i).style.color = "Black"
					}
				}
			}
			else {
				if (i < 10) {
					eid = "0" + i;
					document.getElementById(eid).value = "0";
					document.getElementById(eid).style.color = "Black"
				}
				else {
					document.getElementById(i).value = "0";
					document.getElementById(i).style.color = "Black"
				}
			}
			j--;
		}
	}
	function window_onload() 
	{
    	document.getElementById("hex").value = "0X0";
		document.getElementById("bin").value = "0";
		document.getElementById("dec").value = "0";
	}
	window.onload = window_onload();
</script>
